services:
 swagger-ui:
  image: swaggerapi/swagger-ui
  container_name: swagger-ui
  ports:
    - "8080:8080"
  environment:
    - SWAGGER_JSON=/swagger/swagger.yml
    - BASE_URL=/swagger
  volumes:
    - ./swagger.yml:/swagger/swagger.yml
  depends_on:
    - backend

 backend:
   build: ./backend
   container_name: backend
   ports:
     - "8000:8000"
   env_file:
     - .env
   # This is a volume mapping - maps the local "backend" directory to "/app" in the container
   # This means:
   #   - Code changes made locally are immediately reflected inside the container.
   #   - Files created in the container (like Django migrations) are saved locally.
   volumes:
     - ./backend:/app
   working_dir: /app


# IPv6 is REQUIRED for Supabase DB connection (their DB host is IPv6-only)
# Please check that:
# 1.) Docker is running with IPv6 enabled in network settings
# 2.) Windows Network Adapter → Properties → "Internet Protocol Version 6 (TCP/IPv6)" is checked
networks:
  default:
    enable_ipv6: true
